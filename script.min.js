function sanitize(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}const guardarDiv=document.getElementById("guardar");function renderHistorico(){guardarDiv.innerHTML="";try{const e=localStorage.getItem("historico")||"[]",t=JSON.parse(e);if(!Array.isArray(t))return void console.warn("Hist칩rico inv치lido no localStorage");t.forEach((e,t)=>{if("object"!=typeof e||null===e)return void console.warn(`Entrada inv치lida no hist칩rico: ${t}`);const o=document.createElement("div"),n=sanitize(e.hab1||""),r=sanitize(e.hab2||""),a=sanitize(e.hab3||""),c=sanitize(e.hab4||""),d=sanitize(e.date||""),l=document.createElement("p");l.textContent="九덢잺 "+n;const m=document.createElement("p");m.textContent="九덢잺 "+r;const i=document.createElement("p");i.textContent="九덢잺 "+a;const s=document.createElement("p");s.textContent="九덢잺 "+c;const u=document.createElement("small");u.textContent=d;const g=document.createElement("hr");o.appendChild(l),o.appendChild(m),o.appendChild(i),o.appendChild(s),o.appendChild(u),o.appendChild(g),guardarDiv.appendChild(o)})}catch(e){console.error("Erro ao renderizar hist칩rico:",e)}}function restoreInputs(){try{document.getElementById("hab1").value=localStorage.getItem("hab1")||"",document.getElementById("hab2").value=localStorage.getItem("hab2")||"",document.getElementById("hab3").value=localStorage.getItem("hab3")||"",document.getElementById("hab4").value=localStorage.getItem("hab4")||""}catch(e){console.error("Erro ao restaurar inputs:",e)}}function restoreChecks(){try{"true"===localStorage.getItem("done1")&&(document.getElementById("res1").textContent="九덢잺"),"true"===localStorage.getItem("done2")&&(document.getElementById("res2").textContent="九덢잺"),"true"===localStorage.getItem("done3")&&(document.getElementById("res3").textContent="九덢잺"),"true"===localStorage.getItem("done4")&&(document.getElementById("res4").textContent="九덢잺")}catch(e){console.error("Erro ao restaurar checks:",e)}}function applyFunMode(e){e?document.body.classList.add("fun"):document.body.classList.remove("fun")}document.getElementById("botao1").addEventListener("click",()=>{document.getElementById("res1").textContent="九덢잺";try{localStorage.setItem("done1","true")}catch(e){console.error("Erro ao salvar done1:",e)}}),document.getElementById("botao2").addEventListener("click",()=>{document.getElementById("res2").textContent="九덢잺";try{localStorage.setItem("done2","true")}catch(e){console.error("Erro ao salvar done2:",e)}}),document.getElementById("botao3").addEventListener("click",()=>{document.getElementById("res3").textContent="九덢잺";try{localStorage.setItem("done3","true")}catch(e){console.error("Erro ao salvar done3:",e)}}),document.getElementById("botao4").addEventListener("click",()=>{document.getElementById("res4").textContent="九덢잺";try{localStorage.setItem("done4","true")}catch(e){console.error("Erro ao salvar done4:",e)}}),document.getElementById("salvar").addEventListener("click",function(){try{const e=document.getElementById("hab1").value.trim(),t=document.getElementById("hab2").value.trim(),o=document.getElementById("hab3").value.trim(),n=document.getElementById("hab4").value.trim();localStorage.setItem("hab1",e),localStorage.setItem("hab2",t),localStorage.setItem("hab3",o),localStorage.setItem("hab4",n);const r=localStorage.getItem("historico")||"[]",a=JSON.parse(r);Array.isArray(a)&&(a.push({hab1:e,hab2:t,hab3:o,hab4:n,date:(new Date).toLocaleString()}),localStorage.setItem("historico",JSON.stringify(a))),renderHistorico(),document.getElementById("hab1").value="",document.getElementById("hab2").value="",document.getElementById("hab3").value="",document.getElementById("hab4").value="",document.getElementById("hab1").focus()}catch(e){console.error("Erro ao salvar h치bitos:",e),alert("Erro ao salvar h치bitos. Verifique o console.")}}),document.getElementById("clearHistory").addEventListener("click",function(){if(confirm("Tem certeza que deseja limpar o hist칩rico? Esta a칞칚o n칚o pode ser desfeita."))try{localStorage.removeItem("historico"),localStorage.removeItem("done1"),localStorage.removeItem("done2"),localStorage.removeItem("done3"),localStorage.removeItem("done4"),renderHistorico(),document.getElementById("res1").textContent="",document.getElementById("res2").textContent="",document.getElementById("res3").textContent="",document.getElementById("res4").textContent=""}catch(e){console.error("Erro ao limpar hist칩rico:",e),alert("N칚o foi poss칤vel limpar o hist칩rico. Veja o console.")}}),document.getElementById("toggleFun").addEventListener("click",function(){try{const e="true"===localStorage.getItem("funMode");localStorage.setItem("funMode",(!e).toString()),applyFunMode(!e),this.textContent=e?"Modo Divertido 游꿀":"Modo Normal"}catch(e){console.error("Erro ao alternar modo divertido:",e)}}),document.addEventListener("DOMContentLoaded",function(){try{const e="true"===localStorage.getItem("funMode");applyFunMode(e);const t=document.getElementById("toggleFun");t&&(t.textContent=e?"Modo Normal":"Modo Divertido 游꿀")}catch(e){console.error("Erro ao aplicar modo divertido no carregamento:",e)}}),document.addEventListener("DOMContentLoaded",function(){restoreInputs(),restoreChecks(),renderHistorico()});