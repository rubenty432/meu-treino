function sanitize(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}const guardarDiv=document.getElementById("guardar");function renderHistorico(){guardarDiv.innerHTML="";try{const e=localStorage.getItem("historico")||"[]",t=JSON.parse(e);if(!Array.isArray(t))return void console.warn("Histórico inválido no localStorage");t.forEach((e,t)=>{if("object"!=typeof e||null===e)return void console.warn(`Entrada inválida no histórico: ${t}`);const o=document.createElement("div"),n=sanitize(e.hab1||""),r=sanitize(e.hab2||""),a=sanitize(e.hab3||""),c=sanitize(e.hab4||""),l=sanitize(e.date||""),d=document.createElement("p");d.textContent="✔️ "+n;const m=document.createElement("p");m.textContent="✔️ "+r;const s=document.createElement("p");s.textContent="✔️ "+a;const i=document.createElement("p");i.textContent="✔️ "+c;const u=document.createElement("small");u.textContent=l;const g=document.createElement("hr");o.appendChild(d),o.appendChild(m),o.appendChild(s),o.appendChild(i),o.appendChild(u),o.appendChild(g),guardarDiv.appendChild(o)})}catch(e){console.error("Erro ao renderizar histórico:",e)}}function restoreInputs(){try{document.getElementById("hab1").value=localStorage.getItem("hab1")||"",document.getElementById("hab2").value=localStorage.getItem("hab2")||"",document.getElementById("hab3").value=localStorage.getItem("hab3")||"",document.getElementById("hab4").value=localStorage.getItem("hab4")||""}catch(e){console.error("Erro ao restaurar inputs:",e)}}function restoreChecks(){try{"true"===localStorage.getItem("done1")&&(document.getElementById("res1").textContent="✔️"),"true"===localStorage.getItem("done2")&&(document.getElementById("res2").textContent="✔️"),"true"===localStorage.getItem("done3")&&(document.getElementById("res3").textContent="✔️"),"true"===localStorage.getItem("done4")&&(document.getElementById("res4").textContent="✔️")}catch(e){console.error("Erro ao restaurar checks:",e)}}document.getElementById("botao1").addEventListener("click",()=>{document.getElementById("res1").textContent="✔️";try{localStorage.setItem("done1","true")}catch(e){console.error("Erro ao salvar done1:",e)}}),document.getElementById("botao2").addEventListener("click",()=>{document.getElementById("res2").textContent="✔️";try{localStorage.setItem("done2","true")}catch(e){console.error("Erro ao salvar done2:",e)}}),document.getElementById("botao3").addEventListener("click",()=>{document.getElementById("res3").textContent="✔️";try{localStorage.setItem("done3","true")}catch(e){console.error("Erro ao salvar done3:",e)}}),document.getElementById("botao4").addEventListener("click",()=>{document.getElementById("res4").textContent="✔️";try{localStorage.setItem("done4","true")}catch(e){console.error("Erro ao salvar done4:",e)}}),document.getElementById("salvar").addEventListener("click",function(){try{const e=document.getElementById("hab1").value.trim(),t=document.getElementById("hab2").value.trim(),o=document.getElementById("hab3").value.trim(),n=document.getElementById("hab4").value.trim();localStorage.setItem("hab1",e),localStorage.setItem("hab2",t),localStorage.setItem("hab3",o),localStorage.setItem("hab4",n);const r=localStorage.getItem("historico")||"[]",a=JSON.parse(r);Array.isArray(a)&&(a.push({hab1:e,hab2:t,hab3:o,hab4:n,date:(new Date).toLocaleString()}),localStorage.setItem("historico",JSON.stringify(a))),renderHistorico(),document.getElementById("hab1").value="",document.getElementById("hab2").value="",document.getElementById("hab3").value="",document.getElementById("hab4").value="",document.getElementById("hab1").focus()}catch(e){console.error("Erro ao salvar hábitos:",e),alert("Erro ao salvar hábitos. Verifique o console.")}}),document.addEventListener("DOMContentLoaded",function(){restoreInputs(),restoreChecks(),renderHistorico()});